pico-8 cartridge // http://www.pico-8.com
version 29
__lua__
x=4a={}s=4d=1l=3w=30y=x
r=rectfill
b=btn

function p()return flr(rnd(w))end
function k(i,j,c)r(i*s+1,j*s+1,i*s+s,j*s+s,c or 8)end

q=p()e=p()t=0o=false
::_::
t+=1
for i=0,3 do
if(b(i))d=i
end
if t%3==0 and not o then
cls()

add(a,{x,y})
if(#a>l)del(a,a[1]) 

if x==q and y==e then
l+=1
q=p()
e=p()
end

if(d==2)y-=1
if(d==3)y+=1
if(d==0)x-=1
if(d==1)x+=1

if(x<0)x=w
if(x>w)x=0
if(y<0)y=w
if(y>w)y=0

?""..l,0,0,7
for z in all(a) do
o=o or z[1]==x and z[2]==y
k(z[1],z[2],3)
end
k(q,e)
k(x,y,11)
end
if o then
?"game over",47,62,7
end
flip()
goto _
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
